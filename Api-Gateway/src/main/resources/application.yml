server:
  port: 8080

spring:
  application:
    name: api-gateway

  cloud:
    config:
      enabled: false

    security:
        user:
          name: user
          password: password
        basic:
          enabled: false
    gateway:
      globalcors:
        add-to-simple-url-handler-mapping: true
        corsConfigurations:
          '[/**]':
            allowedOrigins: "http://localhost:4200"
            allowedMethods:
              - GET
              - POST
              - PUT
              - DELETE
              - OPTIONS
            allowedHeaders: "*"
            allowCredentials: true
      routes:
        - id: attendance-service
          uri: http://attendance-service:8082
          predicates:
              - Path=/api/attendance/**
          filters:
            - RewritePath=/api/attendance/(?<segment>.*), /attendance/${segment}

        - id: auth-route
          uri: http://employee-service:8081
          predicates:
                  - Path=/api/auth/**
          filters:
            - RewritePath=/api/auth/(?<segment>.*), /auth/${segment}
        - id: employee-route
          uri: http://employee-service:8081
          predicates:
                  - Path=/api/employee/**
          filters:
          - RewritePath=/api/employee/(?<segment>.*), /employee/${segment}
        - id: employee-attendance-route
          uri: http://employee-service:8081
          predicates:
                  - Path=/api/employee-attendance/**
          filters:
            - RewritePath=/api/employee-attendance/(?<segment>.*), /employee-attendance/${segment}
      default-filters:
        - DedupeResponseHeader=Access-Control-Allow-Origin Access-Control-Allow-Credentials

    # 선택: CORS 설정


eureka:
  client:
    register-with-eureka: false
    fetch-registry: false
jwt:
  secret: ekxRWm04M3g3c0JOKFJaOXJZdjVEQHVGYkp2M0hzSzIjbk12RXlQdHFBKjVmQjlrWHBXOQ==
  expiration: 3600000
